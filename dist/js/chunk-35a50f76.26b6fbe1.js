(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35a50f76"],{"0347":function(t,e,s){"use strict";s("59df")},"0c1e":function(t,e,s){"use strict";s("b686")},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"1b7c":function(t,e,s){"use strict";s("de0c")},"2d3b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("van-nav-bar",{attrs:{"left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":t.back},scopedSlots:t._u([{key:"right",fn:function(){return[s("div",{staticClass:"home-search"},[s("van-search",{ref:"search",attrs:{"show-action":"",placeholder:"输入商品名称"},on:{search:t.search},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)]},proxy:!0}])}),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.products.length,expression:"!products.length"}],staticClass:"hot"},[s("div",{staticClass:"keyword"},[s("p",[t._v("大家都在搜")]),t._l(t.hotProduct,(function(e,a){return s("div",{key:a,on:{click:function(s){return t.gotohot(e)}}},[t._v(t._s(e.name))])}))],2),s("div",{staticClass:"his"},[s("p",[t._v("历史记录")]),t._l(t.Shistory,(function(e,a){return s("div",{key:a,on:{click:function(s){return t.searc(e)}}},[s("van-icon",{attrs:{name:"underway-o"}}),t._v(" "+t._s(e)+" ")],1)})),s("p",{directives:[{name:"show",rawName:"v-show",value:0!=t.Shistory.length,expression:"Shistory.length!=0"}],staticClass:"clear"},[s("span",{on:{click:t.clearhis}},[t._v("清除历史记录")])])],2)]),s("BgBox",{directives:[{name:"show",rawName:"v-show",value:t.products.length,expression:"products.length"}]},[s("div",{staticClass:"clearfix"},t._l(t.products,(function(e,a){return s("div",{key:a,staticClass:"fl like-item",on:{click:function(s){return t.goDetail(e.pid)}}},[s("ProductItem",{attrs:{item:e}})],1)})),0)])],1)},i=[],n=(s("fb6a"),s("b0c0"),s("ac1f"),s("841c"),s("928f")),r=s("9588"),o={name:"Search",components:{BgBox:n["a"],ProductItem:r["a"]},data:function(){return{name:"",products:[],hotProduct:[],Shistory:[]}},created:function(){var t=this;this.getHotProduct(),this.getSearchhistory(),this.$nextTick((function(){var e=t.$refs.search.querySelector('[type="search"]');e.focus()}))},methods:{back:function(){this.$router.go(-1)},search:function(){var t=this;""!=this.name?(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/search",params:{appkey:this.appkey,name:this.name}}).then((function(e){t.Searchhistory(t.name),t.$toast.clear(),"Q001"==e.data.code?e.data.result.length>0?t.products=e.data.result:(t.products=[],t.$toast("无商品信息")):t.$toast("服务器请求出错")})).catch((function(e){t.$toast.clear()}))):this.$toast("请输入搜索内容")},getHotProduct:function(){var t=this;this.axios({method:"GET",url:"/typeProducts",params:{appkey:this.appkey,key:"isHot",value:1}}).then((function(e){500==e.data.code&&(t.hotProduct=e.data.result)})).catch((function(t){}))},goDetail:function(t){this.$router.push({name:"Detail",params:{pid:t}})},gotohot:function(t){this.Searchhistory(t.name);var e=t.pid;this.$router.push({name:"Detail",params:{pid:e}})},Searchhistory:function(t){this.Shistory[0]!=t&&(this.Shistory.unshift(t),this.Shistory=this.Shistory.slice(0,6),localStorage.setItem("Searchhistory",JSON.stringify(this.Shistory)))},getSearchhistory:function(){var t=JSON.parse(localStorage.getItem("Searchhistory"));t&&(this.Shistory=t)},searc:function(t){this.name=t,this.search()},clearhis:function(){localStorage.removeItem("Searchhistory"),this.Shistory=[]}}},c=o,u=(s("0c1e"),s("2877")),l=Object(u["a"])(c,a,i,!1,null,"844a4d0a",null);e["default"]=l.exports},"59df":function(t,e,s){},"841c":function(t,e,s){"use strict";var a=s("d784"),i=s("825a"),n=s("1d80"),r=s("129f"),o=s("14c3");a("search",1,(function(t,e,s){return[function(e){var s=n(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,s):new RegExp(e)[t](String(s))},function(t){var a=s(e,t,this);if(a.done)return a.value;var n=i(t),c=String(this),u=n.lastIndex;r(u,0)||(n.lastIndex=0);var l=o(n,c);return r(n.lastIndex,u)||(n.lastIndex=u),null===l?-1:l.index}]}))},"928f":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-box"},[s("div",{staticClass:"bg"}),s("div",{staticClass:"bg-content"},[t._t("default")],2)])},i=[],n={name:"BgBox"},r=n,o=(s("1b7c"),s("2877")),c=Object(o["a"])(r,a,i,!1,null,"4cbab3b7",null);e["a"]=c.exports},9588:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"product-item"},[s("div",[s("div",[s("img",{staticClass:"auto-img",attrs:{src:t.item.smallImg,alt:""}})]),s("div",{staticClass:"pro-name one-text"},[t._v(t._s(t.item.name))]),s("div",{staticClass:"pro-enname one-text"},[t._v(t._s(t.item.enname))]),s("div",{staticClass:"clearfix"},[s("div",{staticClass:"fl pro-price"},[t._v("￥"+t._s(t.item.price))]),t.isRemove?s("div",{staticClass:"fr delete",on:{click:function(e){return e.stopPropagation(),t.remove()}}},[s("van-icon",{attrs:{name:"delete"}})],1):t._e()])])])},i=[],n={name:"ProductItem",props:{item:{type:Object,default:function(){return{}}},isRemove:{type:Boolean,default:!1}},methods:{remove:function(){this.$emit("remove")}}},r=n,o=(s("0347"),s("2877")),c=Object(o["a"])(r,a,i,!1,null,"f1debc2e",null);e["a"]=c.exports},b0c0:function(t,e,s){var a=s("83ab"),i=s("9bf2").f,n=Function.prototype,r=n.toString,o=/^\s*function ([^ (]*)/,c="name";a&&!(c in n)&&i(n,c,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(t){return""}}})},b686:function(t,e,s){},de0c:function(t,e,s){}}]);
//# sourceMappingURL=chunk-35a50f76.26b6fbe1.js.map